#!/bin/bash

export PYTHONDONTWRITEBYTECODE=1 && export PYTHONUNBUFFERED=1 && export OMP_NUM_THREADS=1 && export TRANSFORMERS_IS_CI=true && export PYTEST_TIMEOUT=120 && export RUN_PIPELINE_TESTS=false && export RUN_FLAKY=true
cd transformers/
python3 -m pytest -m 'not generate' -n 8 --max-worker-restart=0 -rsfE tests/models/imagegpt/test_modeling_imagegpt.py tests/models/maskformer/test_modeling_maskformer.py tests/models/unispeech/test_modeling_unispeech.py tests/models/rt_detr_v2/test_modeling_rt_detr_v2.py tests/models/mask2former/test_modeling_mask2former.py tests/models/aimv2/test_modeling_aimv2.py tests/models/mm_grounding_dino/test_modeling_mm_grounding_dino.py tests/models/encodec/test_modeling_encodec.py tests/models/blip_2/test_modeling_blip_2.py tests/models/segformer/test_modeling_segformer.py tests/models/longt5/test_modeling_longt5.py tests/models/fnet/test_modeling_fnet.py tests/models/pix2struct/test_modeling_pix2struct.py tests/models/dpt/test_modeling_dpt_hybrid.py tests/models/mobilevitv2/test_modeling_mobilevitv2.py tests/models/bridgetower/test_modeling_bridgetower.py tests/models/funnel/test_modeling_funnel.py tests/models/esm/test_modeling_esmfold.py tests/models/nllb_moe/test_modeling_nllb_moe.py tests/models/vits/test_modeling_vits.py tests/models/vitpose/test_modeling_vitpose.py tests/models/mixtral/test_modeling_mixtral.py tests/models/autoformer/test_modeling_autoformer.py tests/models/hgnet_v2/test_modeling_hgnet_v2.py tests/models/llava_next_video/test_modeling_llava_next_video.py tests/models/chameleon/test_modeling_chameleon.py tests/models/vit_mae/test_modeling_vit_mae.py tests/models/bit/test_modeling_bit.py tests/models/altclip/test_modeling_altclip.py tests/models/dac/test_modeling_dac.py tests/models/llava_next/test_modeling_llava_next.py tests/models/textnet/test_modeling_textnet.py tests/models/bros/test_modeling_bros.py tests/models/mllama/test_modeling_mllama.py tests/models/qwen2_5_omni/test_modeling_qwen2_5_omni.py tests/models/univnet/test_modeling_univnet.py tests/models/layoutlm/test_modeling_layoutlm.py tests/models/vivit/test_modeling_vivit.py tests/models/emu3/test_modeling_emu3.py tests/models/xglm/test_modeling_xglm.py tests/models/dpt/test_modeling_dpt_auto_backbone.py tests/models/fuyu/test_modeling_fuyu.py tests/models/ctrl/test_modeling_ctrl.py tests/models/gemma2/test_modeling_gemma2.py tests/models/gemma/test_modeling_gemma.py tests/models/phi3/test_modeling_phi3.py tests/models/falcon/test_modeling_falcon.py tests/models/jetmoe/test_modeling_jetmoe.py tests/models/phimoe/test_modeling_phimoe.py
